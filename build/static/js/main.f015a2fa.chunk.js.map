{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/person.js","App.js","index.js"],"names":["Filter","props","value","searchResult","onChange","handleSearch","PersonForm","onSubmit","addPerson","newName","handleName","newNumber","handleNumber","type","Persons","personsToShow","persons","filter","person","name","toLowerCase","includes","map","key","id","number","onClick","deletePerson","baseUrl","axios","get","then","response","data","newObject","post","put","delete","App","useState","setNewName","setNewNumber","setSearchResult","setPersons","message","setMessage","useEffect","personService","initalData","console","log","length","Notification","className","text","event","target","preventDefault","some","trim","window","confirm","foundPerson","find","p","changedPerson","catch","error","setTimeout","responseData","concat","personToDelete","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.f015a2fa.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = (props) => {\r\n    return (\r\n        <div>\r\n        Filter shown with \r\n        <input \r\n          value={props.searchResult}\r\n          onChange = {props.handleSearch}/>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default Filter","import React from 'react'\r\n\r\nconst PersonForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.addPerson}>\r\n            <div>\r\n                name: <input \r\n                value={props.newName}\r\n                onChange = {props.handleName}/>\r\n            </div>\r\n            <div>\r\n                number: <input \r\n                value={props.newNumber}\r\n                onChange = {props.handleNumber}/>\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">add</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default PersonForm","import React from 'react'\r\n\r\nconst Persons = (props) => {\r\n\r\n    const personsToShow = (props.searchResult === '')\r\n        ? props.persons\r\n        : props.persons.filter(person => person.name\r\n                .toLowerCase().includes(props.searchResult.toLowerCase()))\r\n        \r\n    return (\r\n        <div>\r\n            {personsToShow.map(person => \r\n                <div key = {person.id}> \r\n                    {person.name} {person.number} \r\n                    <button key = {person.id} onClick = {() => props.deletePerson(person.id)}>\r\n                        delete\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Persons","import axios from 'axios'\r\n\r\n//const baseUrl = 'http://localhost:3001/api/persons'\r\nconst baseUrl = 'https://limitless-escarpment-95563.herokuapp.com/api/persons'\r\n\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)\r\n  return request.then(response => response.data) \r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst deleteObject = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { getAll, create, update, deleteObject }","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport personService from './services/person'\n\nconst App = () => {\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ searchResult, setSearchResult ] = useState('')\n  const [ persons, setPersons ] = useState([])\n  const [ message, setMessage ] = useState(null)\n\n  \n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initalData => {\n        setPersons(initalData)\n      })\n  }, [])\n\n  console.log('render', persons.length, 'persons')\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    \n    if(persons.some(person => person.name === newName.trim())) {\n      if(window.confirm(`${newName} is already added to phonebook, \n      replace the old number with a new one?`)){\n        const foundPerson = persons.find(p => p.name === newName.trim())\n        const changedPerson = { ...foundPerson, number: newNumber }\n\n        // Revising the record\n        personService\n          .update(foundPerson.id, changedPerson)\n          .then(response => {        \n            setPersons(persons.map(p => \n              p.name !== changedPerson.name ? p : response))\n            setNewName('')\n            setNewNumber('')    \n          })\n          .catch(error => {\n            if (error.response) {\n              console.log(\"Add Person: \", error.response.data)\n            }\n            setMessage({\n              text: `Information of ${changedPerson.name} has already been removed from the server`,\n              type: \"error\"\n            })\n            setTimeout(() => {setMessage(null)}, 5000)\n         }) \n      }\n    } else {\n      const personObject = {\n        name: newName,\n        number: newNumber\n      }\n      // Creating new record\n      personService\n        .create(personObject)    \n        .then(responseData => { \n          setPersons(persons.concat(responseData))\n          setMessage({\n            text: `Added ${newName}`,\n            type: \"success\"\n          })\n          setTimeout(() => {setMessage(null)}, 3000)\n          setNewName('')\n          setNewNumber('')\n          console.log(responseData)\n        })\n        .catch(error => {\n          if (error.response) {\n            console.log(\"Add Person: \", error.response.data)\n          } \n       }) \n    }        \n  }\n\n  const handleName = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumber = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleSearch = (event) => {\n    setSearchResult(event.target.value)\n  }\n\n  const deletePerson = (id) => {\n    const personToDelete = persons.find(person => person.id === id)\n    if (window.confirm(`Delete ${personToDelete.name}?`)){\n      personService\n        .deleteObject(personToDelete.id)\n        .then(response => {\n          setPersons(persons.filter(p => p.id !== id))\n          console.log(\"2 - \",response)\n        })\n        .catch(error => {\n           if (error.response) {\n             console.log(\"3 - \",error.response.data)\n           } \n        }) \n    }\n  }\n\n  const Notification = ({ message }) => {\n    if (message === null) {\n      return null\n    }\n\n    return (\n      <div className= {message.type} >\n        {message.text}\n      </div>\n    )  \n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message}/>\n\n      <Filter searchResult = {searchResult}\n              handleSearch = {handleSearch}/>\n\n      <div>\n        <h2>Add a new</h2>\n      </div>\n\n      <PersonForm \n          addPerson = {addPerson} \n          newName = {newName}\n          handleName = {handleName}\n          newNumber={newNumber}\n          handleNumber = {handleNumber}/>\n\n      <h2>Numbers</h2>\n\n      <Persons persons = {persons}\n          searchResult = {searchResult}\n          deletePerson = {deletePerson}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css'\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n"],"sourceRoot":""}